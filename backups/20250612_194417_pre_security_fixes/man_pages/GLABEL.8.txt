GLABEL(8) BSD System Manager’s Manual
GLABEL(8)

NAME

glabel — disk
labelization control utility

SYNOPSIS

glabel create
[−v] name dev 
glabel destroy [−fv] name
[name [...]] 
glabel label [−v] name dev 
glabel stop [−fv] name
[name [...]] 
glabel clear [−v] dev
[dev [...]] 
glabel dump dev [dev [...]]

glabel list [prov [...]] 
glabel load [−v] 
glabel unload [−v]

DESCRIPTION

The glabel utility is
used for GEOM providers labelization. A label can be set up
on a GEOM provider in two ways:
’’manual’’ or
’’automatic’’. When using the
’’manual’’ method, no metadata are
stored on the devices, so a label has to be configured by
hand every time it is needed. The
’’automatic’’ method uses on-disk
metadata to store the label and detect it automatically in
the future.

This class also
provides volume label detection for file systems. Those
labels cannot be set with glabel, but must be set
with the appropriate file system utility, e.g. for UFS the
file system label is set with tunefs(8). Currently supported
file systems are:

•

UFS1 (directory
/dev/ufs/).

•

UFS2 (directory
/dev/ufs/).

•

MSDOSFS (FAT12, FAT16, FAT32)
(directory /dev/msdosfs/).

•

CD ISO9660 (directory
/dev/iso9660/).

Non file-system
labels are created in the directory /dev/label/.

The first
argument to glabel indicates an action to be
performed:

create

Create
temporary label name for the given provider. This is
the ’’manual’’ method. The kernel
module geom_label.ko will be loaded if it is not
loaded already.

label

Set up a label
name for the given provider. This is the
’’automatic’’ method, where metadata
is stored in provider’s last sector. The kernel module
geom_label.ko will be loaded if it is not loaded
already.

stop

Turn off the
given label by its name. This command does not touch
on-disk metadata!

destroy

Same as
stop.

clear

Clear metadata
on the given devices.

dump

Dump metadata
stored on the given devices.

list

List all
currently configured devices, or list the given devices.

load

Load
geom_label.ko kernel module.

unload

Unload
geom_label.ko kernel module.

Additional
options:

−f

Force the
removal of the specified labels.

−v

Be more
verbose.

SYSCTL VARIABLES

The following sysctl(8)
variables can be used to control the behavior of the
LABEL GEOM class. The default value is shown next to
each variable.

kern.geom.label.debug:
0

Debug level of the LABEL
GEOM class. This can be set to a number between 0 and 2,
both included. If set to 0 minimal debug information is
printed, and if set to 2 the maximum amount of debug
information in printed.

EXAMPLES

The following example shows how
to set up a label for disk ’’da2’’,
create a file system on it, and mount it:

glabel label -v
usr /dev/da2 
newfs /dev/label/usr 
mount /dev/label/usr /usr 
[...] 
umount /usr 
glabel stop usr 
glabel unload

The next example
shows how to set up a label for a UFS file system:

tunefs -L data
/dev/da4s1a 
mount /dev/ufs/data /mnt/data

DIAGNOSTICS

Exit status is 0 on success, and
1 if the command fails.

SEE ALSO

geom(4), loader.conf(5),
geom(8), mount(8), newfs(8), sysctl(8), tunefs(8),
umount(8)

HISTORY

The glabel utility
appeared in FreeBSD 5.3.

AUTHORS

Pawel Jakub Dawidek
pjd [AT] FreeBSD.org>

BSD July 2,
2004 BSD