NAME

guestfs-release-notes
- libguestfs Release Notes

RELEASE NOTES FOR LIBGUESTFS 1.14

These release
notes only cover the differences from the previous
stable/dev branch split (1.12.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.

New
features 
Erlang bindings. 
virt-alignment-scan is a new tool to check the alignment of

partitions within virtual machines or disk images. 
virt-sparsify is a new tool to make virtual machine disk
images 
sparse. 
virt-sysprep is a new tool to make cloning guests from a
template 
simpler.

guestfish

- New commands
setenv, unsetenv, to set environment variables. 
- The input file and line number is printed in error
messages. 
- guestfish progress bars are now a "mini-library"
used by other 
tools too.

guestmount

- the --live
option (for access to live VMs) now works.

virt-cat

- virt-cat can
now handle Windows paths and drive letters
(RHBZ#693359).

virt-filesystems

- the MBR
partition type byte is displayed in --long output.

virt-make-fs

- virt-make-fs
now sets the MBR partition type byte correctly, 
improving compatibility with Windows (RHBZ#746295).

virt-resize

- virt-resize
can now work with guests using extended and logical 
partitions, in particular Ubuntu guests. 
- virt-resize can now align the first partition of Windows
guests, 
improving performance. The new virt-resize --align-first
option 
controls this behaviour. 
- The virt-resize --machine-readable flag makes it possible
to use 
virt-resize from other programs. 
- Partitions are now aligned to 128 sectors (usually 64K) by

default. This improves efficiency on high-end storage. The
new 
virt-resize --alignment option allows the alignment to be

adjusted.

virt-win-reg

- The syntax
for deleting registry keys and values is documented 
in the man page (RHBZ#737944).

library

- non-printing
characters are escaped correctly in debug output. 
- GUESTFS_EVENT_ENTER is a new event type generated whenever
a 
libguestfs function is called. 
- the library contains systemtap/DTrace probes. 
- the library can now be compiled without hivex
(RHBZ#723474).

inspection

- Improve
detection of Windows disks. 
- Adds support for: 
ttylinux - a minimal Linux 
Mageia (thanks Michael Scherer) 
OpenSUSE and zypper (thanks Michael Scherer, Vincent Untz)

Ubuntu logos (thanks Michael Scherer) 
NetBSD and pkgsrc (thanks Michael Scherer) 
- Handle some guest types that use /dev/root in /etc/fstab.

- Fix handling of guests with > 26 disks (thanks Matthew
Booth) 
- Add support for guests with HP Smart Array disks (thanks
Matthew Booth)

febootstrap

-
FEBOOTSTRAP_KERNEL, FEBOOTSTRAP_MODULES environment
variables can 
be set in order to choose which kernel to use for the
appliance.

misc

- ArchLinux
support now working with Linux 3.0 (thanks Erik Nolte) 
- libvirt disks marked  are now added
readonly when 
using the virt-tools '-d' option.

Security

(no security problems were found or fixed in this
release)

New APIs

compress-out, compress-device-out, copy-device-to-device,

copy-device-to-file, copy-file-to-device, copy-file-to-file,

get-smp, part-to-partnum, set-smp. 
The mount API no longer implicitly adds -o sync,noatime
options. 
add-domain has a new 'readonlydisk' optional parameter to
control 
how  disks are handled.

Internals

- Coverity was run on the source and more bugs were
identified and 
fixed. 
- PCRE library is now required to build libguestfs. 
- APIC is now the default for the appliance. You can also
enable 
SMP support in the appliance. 
- OCaml bindings now correctly acquire GC lock during
callbacks. 
- Out of tree builds should now work correctly (thanks Hilko
Bengen). 
- ./configure --with-extra="..." can be used by
packagers to set 
the extra version string. 
- zero, zero-device APIs: if the blocks already contain
zeroes, 
don't write zeroes, so that we don't unnecessarily make the

underlying storage non-sparse. 
- is-zero, is-zero-device APIs: optimize these so zero
detection is 
faster.

Bugs
fixed 
- 748266 libguestfs should detect versions of qemu which
require -machine pc option 
- 747290 libguestfs ignores  in libvirt XML

- 747287 Misleading error message when permission denied
opening a disk image 
- 746295 virt-make-fs doesn't set partition ID 
- 744795 guestmount --live is not usable 
- 737944 virt-win-reg hyphen (delete key) syntax may be
wrong, and is not documented 
- 733297 ruby event handlers fail with "exception in
callback: wrong argument type Proc (expected Data)"

- 731744 libguestfs should escape special/non-printing
characters in debug output 
- 729887 appliance crashes running aug_init with flags=4

- 729075 libguestfs confuses Hp_recovery partition with
Windows root filesystem 
- 727178 error: luks_open: cryptsetup: error while loading
shared libraries: libfipscheck.so.1: cannot open shared
object file: No such file or directory 
- 726739 libguestfs: error: aug_get: no matching node,
trying to find hostname 
- 723474 If hivex and/or pcre not installed, libguestfs
fails to compile 
- 693359 virt-cat and virt-edit don't handle case sensitive
NTFS paths properly 
- 678231 virt-inspector reports unknown filesystem UUID 
- 671082 libguestfs does not work with kernel-rt 
- 666578 libguestfs: unknown filesystem label SWAP-sda2 
- 642821 virt-resize falls over on a disk image with a
logical swap partition

SEE ALSO

guestfs-examples(1),
guestfs-faq(1), guestfs-performance(1),
guestfs-recipes(1), guestfs-testing(1),
guestfs(3), guestfish(1),
http://libguestfs.org/

AUTHOR

Richard W.M.
Jones

COPYRIGHT

Copyright (C)
2009-2023 Red Hat Inc.

LICENSE

This program is
free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have
received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301
USA.

BUGS

To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools

To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools

When reporting
a bug, please supply:

•

The version of libguestfs.

•

Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)

•

Describe the bug accurately and give a way to reproduce
it. 

•

Run libguestfs-test-tool(1) and paste the
complete, unedited output into the bug report.