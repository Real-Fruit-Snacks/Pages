NAME

news2mail -
Channel script to gateway news into e-mails

SYNOPSIS

news2mail

DESCRIPTION

news2mail
runs as a channel process underneath innd. It is set
up as channel feed in newsfeeds, with different
mailing-lists as funnel entries pointing to it (see below);
news2mail expects the token of an article followed by
a sequence of list names.

news2mail
uses the configuration file pathetc/news2mail.cf to
map mailing-list names to e-mail addresses. news2mail
causes the mail transport agent (usually sendmail, as
set in the mta parameter in inn.conf) to queue
the messages for later delivery (to avoid DOS attacks by
mass postings). You must run "sendmail -q"
periodically to get the queue processed.

CONFIGURATION FILE

The
configuration file format is simple: comments (starting with
a hash sign "#") and blank lines are ignored. All
other lines have two or three fields on them. The first is
the list name and is what innd uses (i.e. the site
field of the entry in the newsfeeds file). The second
field is the actual e-mail address to send the article to.
The third field is optional: it sets the envelope-from
address (for instance a list memberâ€™s address; if not
set, it defaults to the "news" user).

In e-mail
messages, the To header field body will have the
mailing-list address (i.e. the second field). Besides,
news2mail strips most article header fields from the
article before mailing.

In
newsfeeds, the channel feed should look like:

news2mail!:!*:Ac,Tc,Wn*:/news2mail

and for each
mailing-list, you only have to add to newsfeeds an
entry list like:

list-big-red-ants/lists.ucsd.edu\

:!*,rec.pets.red-ants\ 
:Ap,Tm:news2mail!

Please note the
use of "Ap" and the exclusion of the list owner
domain to protect the list from feeding back new arrivals
from the list. The site name used in the newfeeds
entry for a mailing-list (above
"list-big-red-ants") must be the same as the first
field in an entry in news2mail.cf. For instance:

#
newsfeeds-name list-to-address [list-sender-address] 
list-big-red-ants ants [AT] lists.edu
news+ants [AT] news.org

FILES

pathbin/news2mail

The Perl program itself used to
gateway news into e-mails.

pathetc/news2mail.cf

The configuration file which
specifies the mapping to use for gatewaying.

BUGS

The
news2mail program is set up as a funnelled channel in
newsfeeds, implying multiple matches should be
handled as one - and multiple matching funnelled feeds
will result in a single call to the script. Therefore, since
only one mail is sent, crossposts are not currently properly
handled as for the envelope-from address (which then
defaults to the "news" user).

HISTORY

news2mail
was written by Brian Kantor in 1998. This man page was
written by James Brister and converted to POD by Julien
Elie. The third optional field in news2mail.cf was
added by D. Stussy in 2008.

SEE ALSO

innd(8),
newsfeeds(5).