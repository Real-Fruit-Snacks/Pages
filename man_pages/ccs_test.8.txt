NAME

ccs_test - The
diagnostic tool for a running Cluster Configuration
System.

SYNOPSIS

ccs_test
[options] command>

DESCRIPTION

ccs_test
is part of the Cluster Configuration System (CCS). It is a
diagnostic tool designed to validate the correct operation
of a running CCS system. It will communicate with the CCS
daemon - ccsd - to obtain any information stored in
the system.

OPTIONS

-h

Help. Print out the usage syntax
and exit.

-V

Print the version information and exit.

COMMANDS

connect
[force] [block] [cluster name]

This command creates a
connection to ccsd. It returns a descriptor, which is used
as an parameter to other commands.

The
&rsquo;force&rsquo; key-word is used to establish a
connection to ccsd in the absence of a quorate cluster
manager.

The
&rsquo;block&rsquo; key-word is used (with the
&rsquo;force&rsquo; key-word) to tell ccsd to keep
broadcasting for a valid configuration file until one is
found.

The
&rsquo;cluster name&rsquo; is used (with the
&rsquo;force&rsquo; key-word) to specify that only
configuration files containing the given cluster name are
valid possibilities.

get 

Get the results of a given
request. The &rsquo;desc&rsquo; is the number returned from
the connect command. The &rsquo;request&rsquo; is a
valid Xpath request.

If
&rsquo;request&rsquo; results in multiple matches, the first
will be returned. Subsequent calls with the same
&rsquo;request&rsquo; will result in the subsequent matches.
Once all the matches have been returned, a subsequent call
will begin again with the first result.

get_list 

Similar to the get
command. However, issuing subsequent calls with the same
&rsquo;request&rsquo; will result in all matches being
returned (one at a time), then null, then starting over with
the first result.

set 

Sets a particular
&rsquo;path&rsquo; to the given &rsquo;value&rsquo;. Not yet
implemented.

get_state

Get the state associated with a
given connection.

set_state

Set the current working path
(cwp) to &rsquo;ncwp&rsquo; for a given connection.

EXAMPLES

To connect
to ccsd: 
> ccs_test connect

Connect
successful. 
Connection descriptor = 0

Or, if the
cluster is not yet quorate and the name of the cluster is
&rsquo;mycluster&rsquo;:

> ccs_test
connect force block mycluster

Connect
successful. 
Connection descriptor = 0

To get the
cluster name from ccsd: 
> ccs_test get 0 /cluster/@name

Get successful.

Value = 

To get the
connection state: 
> ccs_test get_state 0

Get state
successful. 
Current working path: 
Previous query : /cluster/@name

To set the
connection state: 
> ccs_test set_state 0 /cluster

Set state
successful.

After
setting the connection state, note the change: 
> ccs_test get_state 0

Get state
successful. 
Current working path: /cluster 
Previous query : /cluster/@name

After
setting the connection state, you can now query with an
absolute or relative path: 
> ccs_test get 0 @name

Get successful.

Value = 

> ccs_test
get 0 /cluster/@name

Get successful.

Value = 

To
disconnect: 
> ccs_test disconnect 0

Disconnect
successful.

SEE ALSO

ccs(7),
ccsd(8), cluster.conf(5)