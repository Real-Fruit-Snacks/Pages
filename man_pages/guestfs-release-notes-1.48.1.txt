NAME

guestfs-release-notes
- libguestfs Release Notes

RELEASE NOTES FOR LIBGUESTFS 1.48

These are the
release notes for libguestfs stable release 1.48. This
describes the major changes since 1.46.

Libguestfs
1.48.0 was released on 14 March 2022.

Some
features removed 
The following little used, experimental or unsafe features
have been removed:

"Libguestfs
live" was an experimental feature that allowed you (in
theory) to connect to an existing instance of the libguestfs
daemon in a running guest. If you want to do this we
recommend installing qemu-guest-agent in the guest instead
and using the APIs provided by it. The related
"unix:" backend has been removed. The
guestfish(1) and guestmount(1) --live
option now prints an error.

The User-mode
Linux ("uml") backend has been removed. It was an
alternate hypervisor that could be used instead of qemu. It
had many limitations including lack of network support, and
lack of qemu native features like qcow2 or network-backed
disks. In addition it was slower than KVM and particular
features like bulk upload/download were painfully slow. Also
the UML feature of Linux that it was based on often does not
work.

The 9pfs APIs
"guestfs_list_9p" and "guestfs_mount_9p"
have been deprecated and now return errors. This was related
to an experimental feature for passing through host
filesystems to the appliance. You had to hand-hack the qemu
command line for this to work and it did not fit the
libguestfs model very well.

"guestfs_add_drive"
no longer supports hotplugging (adding a drive after
launch), and "guestfs_remove_drive" has been
deprecated and now returns an error. Hotplugging was an
unsuccessful feature which was complicated to implement and
maintain, and was slow and insecure. It also only worked
with the non-default libvirt backend, and was never
implemented in the default "direct" backend.

Language
bindings 
Fix allocation and deallocation of string lists in golang
bindings (Laszlo Ersek).

Multiple fixes
to the OCaml bindings: Fix warnings, move minimum version to
OCaml 4.04, replace various deprecated OCaml features with
modern OCaml features.

Running
"make distclean" in the rust directory now
completely cleans the cargo temporary files.

Inspection

Fix inspection of modern Pardus GNU/Linux (Laszlo
Ersek).

Add support for
Kylin (Laszlo Ersek).

Add support for
Rocky Linux (Neil Hanlon).

Inspection of
guests which use LUKS encryption on top of LVM logical
volumes should now work (Laszlo Ersek).

API

New APIs

No new APIs
were added in libguestfs 1.48.

Other API
changes

"guestfs_list_9p"
and "guestfs_mount_9p" are deprecated and now
return errors.

"guestfs_remove_drive"
has been deprecated and now returns an error.

In
"guestfs_xfs_admin" the "lazycounter"
parameter is deprecated because it is no longer supported in
recent versions of XFS.

Partition APIs
now cope with the broken MBR partition tables created by
dosfstools ≥ 4.2 (Laszlo Ersek).

In
"guestfs_md_create" the "chunk"
parameter should not be used with RAID 1. Previously it was
allowed but ignored, but now it will give an error (Laszlo
Ersek).

Build
changes 
Multiple compiler warnings fixed and/or analyzed and
suppressed (Laszlo Ersek).

Fix detection
of optional Yara library using pkg-config instead of
checking for library/header file (Laszlo Ersek).

Update valgrind
suppressions for glibc 2.35, OCaml 4.13 and libvirt 7.7.
"make check-valgrind" works again.

If using
libvirt ≥ 3.8.0, we now use  to create
the appliance network interface instead of adding qemu
command line parameters (Laszlo Ersek).

The
guestfs-release-notes(1) page was a broken link, but
it has now been restored as a new page that links to the
release notes from each stable release.

Internals

The libc API strerror_r(3) is difficult to use
correctly because of differing signatures in glibc and other
libc. A wrapper "guestfs_int_strerror" has been
created to hide the differences.

Bugs
fixed 
https://bugzilla.redhat.com/2030709

[RFE] libguestfs: Add Rocky
Linux support

https://bugzilla.redhat.com/2030396

Fix usage of strerror_r which
caused corrupted error messages

https://bugzilla.redhat.com/2024022

xfs-admin: Cannot disable
lazy-counters on V5 fs

https://bugzilla.redhat.com/1995391

RFE: virt-inspector fails to
detect the distro and applications on Kylin-Desktop-V10
image

https://bugzilla.redhat.com/1993842

RFE: virt-inspector fails to
detect the distro on Pardus-19.5 image

https://bugzilla.redhat.com/1931821

work around mkfs.vfat writes
corrupted filesystem/partition table when used on whole
block device

https://bugzilla.redhat.com/1451665

RFE: Virt-v2v can’t
convert the guest which has encrypted partition

SEE ALSO

guestfs-examples(1),
guestfs-faq(1), guestfs-performance(1),
guestfs-recipes(1), guestfs-testing(1),
guestfs(3), guestfish(1),
http://libguestfs.org/

AUTHORS

Laszlo Ersek

Neil Hanlon 
Richard W.M. Jones

COPYRIGHT

Copyright (C)
2009-2023 Red Hat Inc.

LICENSE

This program is
free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have
received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301
USA.

BUGS

To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools

To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools

When reporting
a bug, please supply:

•

The version of libguestfs.

•

Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)

•

Describe the bug accurately and give a way to reproduce
it. 

•

Run libguestfs-test-tool(1) and paste the
complete, unedited output into the bug report.