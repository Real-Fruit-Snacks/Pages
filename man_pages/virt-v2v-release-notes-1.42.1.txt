NAME

virt-v2v-release-notes
- virt-v2v release notes for 1.42

DESCRIPTION

These are the
release notes for virt-v2v 1.42, released on
16th April 2020.

New
features 
This is the first release where virt-v2v lives in a separate
repository from libguestfs. The two projects are now broadly
decoupled from one another.

Add a new -o
json output mode. Primarily this is used to do
conversions to KubeVirt (Pino Toscano).

Use new libvirt
"" feature to get the source guest
firmware (Pino Toscano).

virt-v2v -o
rhv-upload new option -oo rhv-disk-uuid allows
disk UUIDs to be specified. Also -oo rhv-cafile is
now optional (Pino Toscano).

Conversions
over ssh now use nbdkit-ssh-plugin(1) instead of the
QEMU ssh driver. Similarly nbdkit-curl-plugin(1) is
used instead of the QEMU curl driver. This allowed us to add
more flexible features such as password authentication,
bandwidth throttling (new --bandwidth option),
readahead, and automatic retry on network failures.

For Windows
guests, QEMU Guest Agent MSI may now be installed
(Tom&aacute;&scaron; Golembiovsk&yacute;).

Other
fixes 
In -o libvirt mode, support Windows Server 2019 (Pino
Toscano).

Fix Ubuntu
Server conversions (Pino Toscano).

Fix
installation of qemu-ga by only installing arch-specific
files in the guest (Pino Toscano).

Delay
installation of qemu-ga until after virtio-win drivers have
been installed and rebooted (Tom&aacute;&scaron;
Golembiovsk&yacute;).

Save the log
from running RHEV-APT installer to allow debugging
(Tom&aacute;&scaron; Golembiovsk&yacute;).

Check RHV
cluster exists before trying to convert when using -o
rhv-upload mode. Also allows us to detect and reject
various other conditions early. (Pino Toscano).

Label nbdkit
sockets correctly for SELinux/sVirt (Martin Kletzander).

You can use a
block device as the Windows virtio driver ISO.

Multiple fixes
to RHV uploads: Set "DISKTYPE" field correctly
when converting to RHV and VDSM. Properly clean up on
failure. Display disk ID in error messages, and log script
parameters, to help with debugging. Multiple code cleanups.
(Nir Soffer).

Support
conversions to RHV in qcow2 format (Nir Soffer).

Fix detection
of disk status and failures after conversion to RHV (Daniel
Erez).

Cancel disk
transfer and remove uploaded disks on failure of conversion
to RHV (Pino Toscano).

Images
containing small holes (sparse regions) should now convert
faster (Nir Soffer).

The
nbdkit-cacheextents-filter(1) is used to accelerate
sources which have slow sparseness detection, primarily this
means VMware sources using VDDK (Martin Kletzander).

Require at
least 100 free inodes on each guest filesystem before doing
conversion, since lack of inodes could cause conversion
failures (Pino Toscano).

Fix osinfo
output for CentOS 8 conversions (Pino Toscano).

VMware tools
are now removed from Windows guests automatically in most
cases (Pino Toscano).

-i ova
mode no longer reads the whole input OVF into memory, but
parses it off disk (Pino Toscano).

When converting
to OpenStack, we now wait up to 5 minutes (instead of 60
seconds) for the Cinder volume to get attached to the
conversion appliance, since in some cases it was taking a
long time.

If using a new
enough version of nbdkit, virt-v2v logs should be much less
verbose.

Security

There were no security-related bugs found in this
release.

Build
changes 
Libguestfs &ge; 1.40 is required, it is now packaged and
distributed separately from virt-v2v. For developers you can
use a locally built (and not installed) copy of
libguestfs.

Libvirt is now
required to build virt-v2v. Additionally you will require
the OCaml bindings to libvirt (https://libvirt.org/ocaml/),
although a copy is bundled for now (it will be removed
later). (Pino Toscano).

Libosinfo is
required to build virt-v2v. It is used to query information
about guest drivers. (Pino Toscano).

Fixes for OCaml
&ge; 4.10. The minimum version of OCaml required is still
4.01, but may be increased to 4.05 in future.

Test
conversions of Debian 9 and Fedora 29 (Pino Toscano).

Various fixes
to srcdir != builddir (Pino Toscano).

Remove gnulib
modules not used by virt-v2v (Pino Toscano).

Internals

When converting SUSE guests, always try to install QXL
driver (Mike Latimer).

Two new modules
(Nbdkit and Nbdkit_sources) factor out generic nbdkit
operations and nbdkit source operations respectively.

Format Python
code to comply with PEP 8 / pycodestyle (Pino Toscano).

Tests have been
moved to the tests/ subdirectory, and manuals to the
docs/ subdirectory.

Bugs
fixed 
https://bugzilla.redhat.com/1791802

virt-v2v does not install
qemu-ga on EL8 guest

https://bugzilla.redhat.com/1791257

update-crypto-policies command
example is incorrect in virt-v2v-input-xen

https://bugzilla.redhat.com/1791240

[RFE] Make the rhv-cafile
optional

https://bugzilla.redhat.com/1785528

Should remove info about
"Remove VMware tools from Windows guests" in
virt-v2v-input-vmware man page

https://bugzilla.redhat.com/1746699

Can&rsquo;t import guest from
export domain to data domain on rhv4.3 due to error
"Invalid parameter: &rsquo;DiskType=1&rsquo;"

https://bugzilla.redhat.com/1733168

virt-v2v: Use scp -T in -i vmx
-it ssh mode

https://bugzilla.redhat.com/1723305

Delete info "export
PATH=/path/to/nbdkit-1.1.x:$PATH" in
virt-v2v-input-vmware manual page

https://bugzilla.redhat.com/1691659

virt-v2v should show a message
when qemu-guest-agent is installed in guest successfully
during conversion

https://bugzilla.redhat.com/1690574

virt-v2v fails to import a
guest while cannot find &rsquo;file_architecture&rsquo; for
a file

https://bugzilla.redhat.com/1680361

[v2v][RHV][Scale] v2v Migration
to RHV failed on timed out waiting for transfer to
finalize

https://bugzilla.redhat.com/1626503

Unable to maintain static IP
address configuration post VM migration

https://bugzilla.redhat.com/1612653

Guest has no disk after
rhv-upload converting if target data domain has similar name
with other data domain on rhv4.2

https://bugzilla.redhat.com/1605242

Update nbdkit info for vddk in
v2v man page

https://bugzilla.redhat.com/1584678

On W2K12r2 rhev-apt does not
run non-interactively, causing race when starting rhev-apt
service from the command line

https://bugzilla.redhat.com/1518539

Macvtap network will be lost
during v2v conversion

SEE ALSO

virt-v2v(1).

Previous
release notes covering virt-v2v can be found in the
libguestfs project:
guestfs-release-notes-1.40(1).

AUTHORS

Daniel Erez

Richard W.M.
Jones

Tom&aacute;&scaron;
Golembiovsk&yacute;

Martin
Kletzander

Mike
Latimer

Nir Soffer

Pino
Toscano

Ming Xie

COPYRIGHT

Copyright (C)
2009-2020 Red Hat Inc.

LICENSE

This program is
free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have
received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301
USA.

BUGS

To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools

To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools

When reporting
a bug, please supply:

&bull;

The version of libguestfs.

&bull;

Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)

&bull;

Describe the bug accurately and give a way to reproduce
it. 

&bull;

Run libguestfs-test-tool(1) and paste the
complete, unedited output into the bug report.