NAME

nbdkit-iso-plugin
- create virtual ISO (CD-ROM) from directory

SYNOPSIS

nbdkit iso
[dir=]DIRECTORY [[dir=]DIRECTORY ...] 
[prog=mkisofs] [params='-JrT']

nbdkit iso
--dump-plugin

DESCRIPTION

"nbdkit-iso-plugin"
is a plugin for nbdkit(1) which creates a virtual ISO
(CD-ROM) image from a directory on the fly. The files from
DIRECTORY are added to a virtual ISO image which is
served read-only over the NBD protocol.

This plugin
uses xorriso(1), genisoimage(1) or
mkisofs(1) to create the ISO content. See also
"DUMP PLUGIN OUTPUT" below.

To create a
FAT-formatted virtual floppy disk instead of a CD, see
nbdkit-floppy-plugin(1). To create a Linux compatible
virtual disk, see nbdkit-linuxdisk-plugin(1).

EXAMPLE

Create a
virtual ISO which supports Joliet, Rock Ridge and TRANS.TBL
extensions, from files in a directory:

nbdkit iso
/path/to/directory params='-JrT'

"params"
adds -JrT to the xorriso(1),
genisoimage(1) or mkisofs(1) command line,
specifying the required extensions. Note that unless you use
at least one of these extensions, filenames inside the ISO
will be truncated because of limitations of the basic
ISO 9660 format.

PARAMETERS

[dir=]DIRECTORY

Specify the directory
containing files and subdirectories which will be added to
the virtual ISO. Files inside this directory will appear in
the root directory of the ISO.

This parameter
is required and may be specified one or more times. If
multiple directories are specified, they are merged
together.

"dir="
is a magic config key and may be omitted in most cases. See
"Magic parameters" in nbdkit(1).

params=&rsquo;parameters
...&rsquo;

Any other parameters may be
passed through to xorriso(1), genisoimage(1)
or mkisofs(1) by specifying this option.

For
example:

params='-JrT -V
"My Disk Image"'

would specify
Joliet (-J), Rock Ridge (-r) and TRANS.TBL
(-T) extensions, and specify the volume ID
(-V) as "My Disk Image".

Take care when
quoting this parameter; nbdkit passes the resulting string
through another layer of shell interpretation without any
sanity checks for unquoted shell metacharacters.

prog=mkisofs

Choose which program to use to
create the ISO content. The default is xorriso(1),
genisoimage(1) or mkisofs(1) and is picked
when nbdkit is compiled. You only need to use this parameter
if you want to override it at run time.

DUMP PLUGIN OUTPUT

Use:

nbdkit iso
--dump-plugin

to find out
which mkisofs-like program was used when the plugin was
compiled. For example:

$ nbdkit iso
--dump-plugin | grep ^iso_prog= 
iso_prog=xorriso

ENVIRONMENT VARIABLES

"PATH"

xorriso(1),
genisoimage(1), mkisofs(1) or whatever you
supply to the optional "prog" parameter must be
available on the $PATH.

"TMPDIR"

A temporary copy of the ISO is
created in "TMPDIR". If this environment variable
is not set then /var/tmp is used instead. There must
be enough free space here to store the ISO, which might be
quite large.

FILES

$plugindir/nbdkit-iso-plugin.so

The plugin.

Use
"nbdkit --dump-config" to find the location of
$plugindir.

VERSION

"nbdkit-iso-plugin"
first appeared in nbdkit 1.8.

SEE ALSO

nbdkit(1),
nbdkit-plugin(3), nbdkit-file-plugin(1),
nbdkit-floppy-plugin(1),
nbdkit-linuxdisk-plugin(1),
nbdkit-torrent-plugin(1), genisoimage(1),
mkisofs(1), xorriso(1).

AUTHORS

Richard W.M.
Jones

COPYRIGHT

Copyright Red
Hat

LICENSE

Redistribution
and use in source and binary forms, with or without
modification, are permitted provided that the following
conditions are met:

&bull;

Redistributions of source code must retain the above
copyright notice, this list of conditions and the following
disclaimer. 

&bull;

Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials
provided with the distribution.

&bull;

Neither the name of Red Hat nor the names of its
contributors may be used to endorse or promote products
derived from this software without specific prior written
permission. 

THIS SOFTWARE
IS PROVIDED BY RED HAT AND CONTRIBUTORS &rsquo;&rsquo;AS
IS&rsquo;&rsquo; AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.