NAME

fd - floppy
disk device

CONFIGURATION

Floppy drives
are block devices with major number 2. Typically they are
owned by root.floppy and have either mode 0660 (access
checking via group membership) or mode 0666 (everybody has
access). For the following devices, n is the drive
number. It is 0 for the first drive, 1 for the second etc.
To get a minor number for a specific drive connected to the
first controller, add n to the minor base number. If
it is connected to the second controller, add n+128
to the minor base number. Warning: If you use formats
with more tracks than supported by your drive, you may
damage it mechanically. Trying once if more tracks than
the usual 40/80 are supported should not damage it, but no
warranty is given for that. Don&rsquo;t create device
entries for those formats to prevent their usage if you are
not sure.

Drive
independent device files which automatically detect the
media format and capacity:

5.25 inch
double density device files:

5.25 inch high
density device files:

3.5 inch double
density device files:

3.5 inch high
density device files:

3.5 inch extra
density device files:

DESCRIPTION

fd
special files access the floppy disk drives in raw mode. The
following ioctl(2) calls are supported by fd
devices: 
FDCLRPRM

clears the media information of
a drive (geometry of disk in drive).

FDSETPRM

sets the media information of a
drive. The media information will be lost when the media is
changed.

FDDEFPRM

sets the media information of a
drive (geometry of disk in drive). The media information
will not be lost when the media is changed. This will
disable autodetection. In order to re-enable autodetection,
you have to issue an FDCLRPRM .

FDGETDRVTYP

returns the type of a drive
(name parameter). For formats which work in several drive
types, FDGETDRVTYP returns a name which is
appropriate for the oldest drive type which supports this
format.

FDFLUSH

invalidates the buffer cache
for the given drive.

FDSETMAXERRS

sets the error thresholds for
reporting errors, aborting the operation, recalibrating,
resetting, and reading sector by sector.

FDSETMAXERRS

gets the current error
thresholds.

FDGETDRVTYP

gets the internal name of the
drive.

FDWERRORCLR

clears the write error
statistics.

FDWERRORGET

reads the write error
statistics. These include the total number of write errors,
the location and disk of the first write error, and the
location and disk of the last write error. Disks are
identified by a generation number which is incremented at
(almost) each disk change.

FDTWADDLE

Switch the drive motor off for
a few microseconds. This might be needed in order to access
a disk whose sectors are too close together.

FDSETDRVPRM

sets various drive
parameters.

FDGETDRVPRM

reads these parameters
back.

FDGETDRVSTAT

gets the cached drive state
(disk changed, write protected et al.)

FDPOLLDRVSTAT

polls the drive and return its
state.

FDGETFDCSTAT

gets the floppy controller
state.

FDRESET

resets the floppy controller
under certain conditions.

FDRAWCMD

sends a raw command to the
floppy controller.

For more
precise information, consult also the  and
 include files, as well as the manual
page for floppycontrol.

NOTES

The various
formats allow one to read and write many types of disks.
However, if a floppy is formatted with a too small inter
sector gap, performance may drop, up to needing a few
seconds to access an entire track. To prevent this, use
interleaved formats. It is not possible to read floppies
which are formatted using GCR (group code recording), which
is used by Apple II and Macintosh computers (800k disks).
Reading floppies which are hard sectored (one hole per
sector, with the index hole being a little skewed) is not
supported. This used to be common with older 8 inch
floppies.

FILES

/dev/fd*

AUTHORS

Alain Knaff
(Alain [AT] linux.lu), David Niemi (niemidc [AT] tux.org), Bill
Broadhurst (bbroad [AT] netcom.com).

SEE ALSO

floppycontrol(1),
mknod(1), chown(1), getfdprm(1),
superformat(1), mount(8),
setfdprm(1)