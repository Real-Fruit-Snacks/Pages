TRPT(8) BSD System Manager&rsquo;s Manual TRPT(8)

NAME

trpt &mdash;
transliterate protocol trace

SYNOPSIS

trpt [&minus;a]
[&minus;f] [&minus;j]
[&minus;p hex-address] [&minus;s]
[&minus;t] [

system [core] ]

DESCRIPTION

The trpt utility
interrogates the buffer of TCP trace records created when a
socket is marked for &rsquo;&rsquo;debugging&rsquo;&rsquo;
(see setsockopt(2)), and prints a readable description of
these records. When no options are supplied, trpt
prints all the trace records found in the system grouped
according to TCP connection protocol control block
(PCB).

The following
options may be used to alter this behavior:

&minus;a

In addition to
the normal output, print the values of the source and
destination addresses for each packet recorded.

&minus;f

Follow the
trace as it occurs, waiting a short time for additional
records each time the end of the log is reached.

&minus;j

Just give a
list of the protocol control block addresses for which there
are trace records.

&minus;p

Show only trace
records associated with the protocol control block at the
given address hex-address.

&minus;s

In addition to
the normal output, print a detailed description of the
packet sequencing information.

&minus;t

In addition to
the normal output, print the values for all timers at each
point in the trace.

The recommended
use of trpt is as follows. Isolate the problem and
enable debugging on the socket(s) involved in the
connection. Find the address of the protocol control blocks
associated with the sockets using the &minus;A option
to netstat(1). Then run trpt with the &minus;p
option, supplying the associated protocol control block
addresses. The &minus;f option can be used to follow
the trace log once the trace is located. If there are many
sockets using the debugging option, the &minus;j
option may be useful in checking to see if any trace records
are present for the socket in question.

If debugging is
being performed on a system or core file other than the
default, the last two arguments may be used to supplant the
defaults.

FILES 
/boot/kernel/kernel 
/dev/kmem 
SEE ALSO

netstat(1), setsockopt(2)

DIAGNOSTICS

no namelist  When
the system image doesn&rsquo;t contain the proper symbols to
find the trace buffer; others which should be self
explanatory.

BUGS

Should also print the data for
each input or output, but this is not saved in the trace
record.

The output
format is inscrutable and should be described here.

HISTORY

The trpt utility appeared
in 4.2BSD.

BSD
December 11, 1993 BSD