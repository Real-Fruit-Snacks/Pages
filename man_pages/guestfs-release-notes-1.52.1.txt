NAME

guestfs-release-notes
- libguestfs Release Notes

RELEASE NOTES FOR LIBGUESTFS 1.52

These are the
release notes for libguestfs stable release 1.52. This
describes the major changes since 1.50.

Libguestfs
1.52.0 was released on 5 January 2024.

Language
bindings 
The Python bindings now use "bytes" (instead of
"str") for the event callback message, since it
may contain arbitrary 8 bit data (thanks Yonatan
Shtarkman).

Also in the
Python bindings, fix a rare crash, and avoid memory leaks in
event callbacks (thanks Yonatan Shtarkman, Laszlo Ersek,
Eric Blake).

Support for
OCaml 5, and OCaml &ge; 4.07 is now the minimum (thanks
Guillaume Munch-Maccagnoni, Jerry James, Josh Berdine,
J&uuml;rgen H&ouml;tzel, Vincent Laviron).

The OCaml
bindings now release the runtime lock around calls to
"guestfs_close", since that call might be
long-running (for example it might have to shut down the
appliance and synch disks).

Inspection

Support OpencloudOS (cunshunxia@tencent).

API 
SELinux relabelling now runs in parallel, meaning it&rsquo;s
a lot quicker (Andrey Drobyshev).

Add support for
lzma and zstd compression methods in tar APIs (like
"guestfs_tar_in") (Zixun LI).

"guestfs_pvs_full"
previously didn&rsquo;t always return the correct device
names. This has now been fixed.

"guestfs_btrfs_filesystem_balance"
fixed so it now works with more modern btrfs tools
(J&uuml;rgen H&ouml;tzel).

Tools

The guestfish(1) --key option now recognizes
LVM names like
/dev/mapper/rhel_bootp--73--75--123-root (Laszlo
Ersek).

guestfish
--key option also supports a new
--key all:... selector to try the same key on
all devices.

In
guestmount(1) avoid calling fclose(NULL) on error
paths, which might have caused a crash on some
platforms.

Build
changes 
The "RELEASES" file (which listed release dates)
has been removed and replaced with a simple
"RELEASE_DATE" macro in ./configure. This
should simplify builds.

Optionally
passt(1) may be used for networking (Laszlo
Ersek).

dhcpcd(8)
is now used in preference to dh-client on Red Hat
platforms.

Old Ruby
"MiniTest" and "Test::Unit" dependencies
replaced with new "Minitest".

Fix
compatibility issues with libxml2 2.12.

Internals

On x86-64 we now use the more modern q35 machine type when
running the appliance. This should perform slightly better
and has more development attention from the qemu community.
The change should be invisible to libguestfs users.

Fix a
segmentation fault when "TERM" environment
variable was set to "dumb" (Daisuke HATAYAMA).

Avoid a warning
on modern Fedora which does not have /selinux (Andrey
Drobyshev).

Fix build on
OpenSUSE LEAP 15 or other distros with a file(1)
command which did not understand the -S option
(thanks Olaf Hering).

Bugs
fixed 
https://bugzilla.redhat.com/2247057

Remove dependency on
dhcp-client in libguestfs

https://bugzilla.redhat.com/2184967

RFE: support passt for
appliance networking, as QEMU userspace networking
backend

https://bugzilla.redhat.com/2168578

use q35 machine type for
libguestfs appliance

https://bugzilla.redhat.com/1910039

virt-dib doesn&rsquo;t work
with newer diskimage-builder version on RHEL8

SEE ALSO

guestfs-examples(1),
guestfs-faq(1), guestfs-performance(1),
guestfs-recipes(1), guestfs-testing(1),
guestfs(3), guestfish(1),
http://libguestfs.org/

AUTHORS

Andrey
Drobyshev 
cunshunxia 
Emilio Herrera 
grimst 
HATAYAMA Daisuke 
Jan Kuparinen 
J&uuml;rgen H&ouml;tzel 
Laszlo Ersek 
Pavel Borecki 
Richard W.M. Jones 
Temuri Doghonadze 
Tian Shixiong 
Yuri Chornoivan 
Zixun LI

COPYRIGHT

Copyright (C)
2009-2024 Red Hat Inc.

LICENSE

This program is
free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have
received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301
USA.

BUGS

To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools

To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools

When reporting
a bug, please supply:

&bull;

The version of libguestfs.

&bull;

Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)

&bull;

Describe the bug accurately and give a way to reproduce
it. 

&bull;

Run libguestfs-test-tool(1) and paste the
complete, unedited output into the bug report.