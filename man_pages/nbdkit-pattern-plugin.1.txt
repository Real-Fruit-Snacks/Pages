NAME

nbdkit-pattern-plugin
- plugin to serve a fixed pattern of data for testing

SYNOPSIS

nbdkit pattern
[size=]SIZE

DESCRIPTION

"nbdkit-pattern-plugin"
is a plugin for nbdkit(1) which serves a fixed
pattern of data, read only. This is used for testing nbdkit
filters and NBD clients. To create test disks filled with
other repeated patterns use nbdkit-data-plugin(1) or
nbdkit-ones-plugin(1) instead.

The fixed
pattern is the offset, as a 64 bit big endian integer, every
8 bytes. In hexadecimal this looks like:

offset data

0000: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 08 
0010: 00 00 00 00 00 00 00 10 00 00 00 00 00 00 00 18 
0020: 00 00 00 00 00 00 00 20 00 00 00 00 00 00 00 28 
&#8599;
&#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;

byte at offset 0x28 &#9474; 
&#9474; 
64 bit big endian int 
encoding offset 0x28

The size of the
virtual disk must be specified using the "size"
parameter. If the size is not a multiple of 8 then the last
8 byte offset in the pattern is truncated.

Largest
possible size 
nbdkit itself limits plugins to 2&#8310;&sup3;-1 bytes
(decimal: 9223372036854775807,
hexadecimal: 0x7fff_ffff_ffff_ffff).

To test if NBD
clients are free of bugs (not to mention nbdkit itself) you
can use:

nbdkit pattern
9223372036854775807

Note this is
too large for qemu to open.

Little
endian pattern 
To get a little endian pattern instead of big endian apply
nbdkit-swab-filter(1) on top of this plugin:

nbdkit pattern
1G --filter=swab swab-bits=64

PARAMETERS

[size=]SIZE

Specify the virtual size of the
disk image.

This parameter
is required.

"size="
is a magic config key and may be omitted in most cases. See
"Magic parameters" in nbdkit(1).

FILES

$plugindir/nbdkit-pattern-plugin.so

The plugin.

Use
"nbdkit --dump-config" to find the location of
$plugindir.

VERSION

"nbdkit-pattern-plugin"
first appeared in nbdkit 1.6.

SEE ALSO

nbdkit(1),
nbdkit-plugin(3), nbdkit-data-plugin(1),
nbdkit-full-plugin(1), nbdkit-null-plugin(1),
nbdkit-ones-plugin(1),
nbdkit-offset-filter(1),
nbdkit-random-plugin(1),
nbdkit-sparse-random-plugin(1),
nbdkit-swab-filter(1),
nbdkit-zero-plugin(1).

AUTHORS

Richard W.M.
Jones

COPYRIGHT

Copyright Red
Hat

LICENSE

Redistribution
and use in source and binary forms, with or without
modification, are permitted provided that the following
conditions are met:

&bull;

Redistributions of source code must retain the above
copyright notice, this list of conditions and the following
disclaimer. 

&bull;

Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials
provided with the distribution.

&bull;

Neither the name of Red Hat nor the names of its
contributors may be used to endorse or promote products
derived from this software without specific prior written
permission. 

THIS SOFTWARE
IS PROVIDED BY RED HAT AND CONTRIBUTORS &rsquo;&rsquo;AS
IS&rsquo;&rsquo; AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.