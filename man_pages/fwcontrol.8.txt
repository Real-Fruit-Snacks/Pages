FWCONTROL(8) BSD System Manager&rsquo;s Manual
FWCONTROL(8)

NAME

fwcontrol &mdash;
FireWire control utility

SYNOPSIS

fwcontrol
[&minus;u bus_num] [&minus;prt]
[&minus;c node]
[&minus;d node]
[&minus;o node]
[&minus;s node]
[&minus;l file]
[&minus;g gap_count]
[&minus;b pri_req]
[&minus;R filename]
[&minus;S filename]

DESCRIPTION

The fwcontrol utility is
designed to provide a way for users to access and control
the FreeBSD FireWire subsystem. Without options,
fwcontrol will output a list of devices that are/were
connected to the bus.

The following
options are available:

&minus;u
bus_num

Specify the FireWire bus number
to be operated on.

&minus;r

Initiate bus
reset.

&minus;t

Show the
topology map.

&minus;p

Dump PHY
registers.

&minus;c node

Show the configuration ROM on
the node.

&minus;d node

Hex dump of the configuration
ROM.

&minus;o node

Send a link-on PHY packet to
the node.

&minus;s node

Write to the RESET_START
register on the node.

&minus;l file

Load hex dump file of the
configuration ROM and parse it.

&minus;g
gap_count

Broadcast gap_count by
phy_config packet.

&minus;i
pri_req

Set the PRIORITY_BUDGET
register on all supported nodes.

&minus;R
filename

Receive DV stream and dump it
to a file. Use Ctrl-C to stop the receiving. Some DV cameras
seem not to send the stream if a bus manager exits. If you
cannot get the stream, try the following commands:

sysctl
hw.firewire.try_bmr=0 
fwcontrol -r

The resulting
file contains raw DV data excluding isochronous header and
CIP header. It can be handled by libdv in the FreeBSD
Ports Collection.

&minus;S
filename

Send a DV file as isochronous
stream.

EXAMPLES

Each DV frame has a fixed size
and it is easy to edit the frame order.

fwcontrol -R
original.dv

Receive
stream.

dd
if=original.dv of=first.dv bs=120000 count=30

Get first 30
frames(NTSC).

dd
if=original.dv of=second.dv bs=120000 skip=30 count=30

Get second 30
frames(NTSC).

cat second.dv
first.dv | fwcontrol -S /dev/stdin

Swap first and
second 30 frames and send them to DV recorder.

For PAL, replace
&rsquo;&rsquo;bs=120000&rsquo;&rsquo; with
&rsquo;&rsquo;bs=144000&rsquo;&rsquo;.

FILES 
/dev/fw0.0 
SEE ALSO

firewire(4), fwe(4), fwohci(4),
sbp(4)

HISTORY

The fwcontrol utility
first appeared in FreeBSD 5.0.

AUTHORS

Hidetoshi Shimokawa
simokawa [AT] FreeBSD.org>

BUGS

This utility is still under
development and provided for debugging purposes.

BSD
December 30, 2002 BSD