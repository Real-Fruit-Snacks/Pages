NAME

gfs_controld
&minus; daemon that coordinates gfs mounts and recovery

SYNOPSIS

gfs_controld
[OPTIONS]

DESCRIPTION

GFS lives in
the kernel, and the cluster infrastructure (corosync
membership and group management) lives in user space. GFS in
the kernel needs to adjust/recover for certain cluster
events. It&rsquo;s the job of gfs_controld to receive these
events and reconfigure gfs as needed. gfs_controld controls
and configures gfs through sysfs files that are considered
gfs-internal interfaces.

Mounting and
node failure are the main cluster events that gfs_controld
controls. It also manages the assignment of journals to
different nodes. mount.gfs2(8) communicates with
gfs_controld to join the mount group and receive the
necessary options for the kernel mount.

The cman init
script usually starts the gfs_controld daemon.

OPTIONS

Command line
options override a corresponding setting in
cluster.conf.

&minus;D

Enable debugging to stderr and don&rsquo;t fork.

See also gfs_control
dump in gfs_control(8).

&minus;L

Enable debugging to log
file. 

See also logging in
cluster.conf(5).

&minus;g num

groupd compatibility mode, 0
off, 1 on.

Default 0.

&minus;w num

Enable (1) or disable (0)
withdraw. 

Default 1.

&minus;h

Print a help message describing
available options, then exit.

&minus;V

Print program version information, then exit.

Cluster
Upgrading 
When performing a rolling upgrade from cluster2 to cluster3,
the gfs_controld daemon runs in cluster2 compatibility mode
and processes posix lock (plock) requests from the dlm to
remain compatible with cluster2 nodes. Otherwise,
dlm_controld(8) handles plocks.

&minus;p num

Enable (1) or disable (0) plock
code for cluster fs.

Default 1.

&minus;l num

Limit the rate of plock
operations, 0 for no limit.

Default 0.

&minus;o num

Enable (1) or disable (0) plock
ownership. 

Default 1.

&minus;t ms

Plock ownership drop resources
time (milliseconds).

Default 10000.

&minus;c num

Plock ownership drop resources
count. 

Default 10.

&minus;a ms

Plock ownership drop resources
age (milliseconds).

Default 10000.

&minus;P

Enable plock debugging messages
(can produce excessive output).

FILES

cluster.conf(5)
is usually located at /etc/cluster/cluster.conf. It is not
read directly. Other cluster components load the contents
into memory, and the values are accessed through the libccs
library.

Configuration
options are added to the  section of
cluster.conf, within the top level  section.

enable_withdraw

Set to 1/0 to enable/disable a
response to a withdraw.

Cluster
Upgrading 
See note above about compatibility plock handling during a
rolling upgrade. The following options are deprecated, see
dlm_controld(8) for the new equivalent options.

enable_plock

See command line
description.

plock_rate_limit

See command line
description.

plock_ownership

See command line
description.

drop_resources_time

See command line
description.

drop_resources_count

See command line
description.

drop_resources_age

See command line
description.

plock_debug

Enable (1) or disable (0) plock
debugging messages (can produce excessive output). Default
0.

SEE ALSO

mount.gfs2(8),
gfs_control(8), dlm_controld(8),
cman(5), cluster.conf(5)