GNOP(8) BSD System Manager&rsquo;s Manual GNOP(8)

NAME

gnop &mdash; control
utility for NOP GEOM class

SYNOPSIS

gnop create
[&minus;v] [&minus;f failprob]
[&minus;o offset]
[&minus;s size]
[&minus;S secsize] dev1
[dev2 [...]] 
gnop configure [&minus;v]
[&minus;f failprob] prov1
[prov2 [...]] 
gnop destroy [&minus;fv] prov1
[prov2 [...]] 
gnop list [prov [...]] 
gnop load [&minus;v] 
gnop unload [&minus;v]

DESCRIPTION

The gnop utility is used
for setting up transparent providers on existing ones. Its
main purpose is testing other GEOM classes, as it allows
force providers removal and I/O errors simulation with a
given probability. It is also a good starting point for
implementing new GEOM classes.

The first
argument to gnop indicates an action to be
performed:

create

Set up a
transparent provider on the given devices. If operation
succeded, new provider should appear with name
/dev/&lang;

dev &rang; .nop. The kernel module
geom_nop.ko will be loaded if it is not loaded
already.

configure

Configure
existing transparent provider. At the moment it is only used
for changing failure probability. The kernel module
geom_nop.ko will be loaded if it is not loaded
already.

destroy

Turn off the
given transparent providers.

list

List all or the
given currently configured providers.

load

Load
geom_nop.ko kernel module.

unload

Unload
geom_nop.ko kernel module.

Additional
options:

&minus;f

Force the
removal of the specified provider.

&minus;f
failprob

Specifies
failure probability in percentage.

&minus;o
offset

Where to begin
on the original provider.

&minus;s size

Size of the
transparent provider.

&minus;S
secsize

Sector size of
the transparent provider.

&minus;v

Be more
verbose.

SYSCTL VARIABLES

The following sysctl(8)
variables can be used to control the behavior of the
NOP GEOM class. The default value is shown next to
each variable.

kern.geom.nop.debug:
0

Debug level of the NOP
GEOM class. This can be set to a number between 0 and 2,
both included. If set to 0 minimal debug information is
printed, and if set to 2 the maximum amount of debug
information in printed.

EXAMPLES

The following example shows how
to create a transparent provider for disk /dev/da0
with 50% failure probability and destroy it.

gnop create -v
-f 50 da0 
gnop destroy -v da0.nop

DIAGNOSTICS

Exit status is 0 on success, and
1 if the command fails.

SEE ALSO

geom(4), geom(8)

HISTORY

The gnop utility appeared
in FreeBSD 5.3.

AUTHORS

Pawel Jakub Dawidek
pjd [AT] FreeBSD.org>

BSD May 21,
2004 BSD